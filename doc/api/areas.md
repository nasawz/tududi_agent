# 区域管理API文档

## 概述
区域管理API提供区域的CRUD操作，用于组织和管理项目。区域是项目的上级分类，帮助用户将相关项目归类到不同的生活或工作领域。

## 基础路径
```
/api
```

## 认证方式
- 需要有效的登录会话
- 所有操作仅限当前用户自己的数据

## 数据模型

### Area（区域）
| 字段 | 类型 | 说明 |
|------|------|------|
| uid | string | 区域唯一标识符 |
| name | string | 区域名称 |
| description | string | 区域描述 |
| user_id | number | 所属用户ID |

## 接口列表

### 1. 获取所有区域

#### 请求
```http
GET /api/areas
```

#### 响应
**成功 (200)**
```json
[
  {
    "id": 1,
    "uid": "area_work123",
    "name": "工作",
    "description": "与工作相关的项目"
  },
  {
    "id": 2,
    "uid": "area_personal456",
    "name": "个人",
    "description": "个人生活项目"
  },
  {
    "id": 3,
    "uid": "area_learning789",
    "name": "学习",
    "description": "学习和技能提升"
  }
]
```

#### 响应字段说明
| 字段 | 类型 | 说明 |
|------|------|------|
| id | number | 区域ID |
| uid | string | 区域UID |
| name | string | 区域名称 |
| description | string | 区域描述 |

#### 错误响应
| 状态码 | 说明 |
|--------|------|
| 500 | 服务器内部错误 |

---

### 2. 获取单个区域

#### 请求
```http
GET /api/areas/area_work123
```

#### 路径参数
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| uid | string | 是 | 区域UID |

#### 响应
**成功 (200)**
```json
{
  "uid": "area_work123",
  "name": "工作",
  "description": "与工作相关的项目"
}
```

#### 错误响应
| 状态码 | 说明 |
|--------|------|
| 400 | 无效的UID格式 |
| 404 | 区域不存在或不属于当前用户 |
| 500 | 服务器内部错误 |

---

### 3. 创建区域

#### 请求
```http
POST /api/areas
```

#### 请求体
```json
{
  "name": "健康",
  "description": "健康管理和锻炼项目"
}
```

#### 参数说明
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| name | string | 是 | 区域名称（不能为空） |
| description | string | 否 | 区域描述 |

#### 响应
**成功 (201)**
```json
{
  "uid": "area_health123",
  "name": "健康",
  "description": "健康管理和锻炼项目"
}
```

#### 错误响应
| 状态码 | 说明 |
|--------|------|
| 400 | 区域名称为空或缺少必填参数 |
| 400 | 创建失败，包含详细错误信息 |
| 500 | 服务器内部错误 |

---

### 4. 更新区域

#### 请求
```http
PATCH /api/areas/area_health123
```

#### 路径参数
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| uid | string | 是 | 区域UID |

#### 请求体
```json
{
  "name": "健康与运动",
  "description": "健康管理、锻炼和运动项目"
}
```

#### 参数说明
所有参数均为可选，只更新提供的字段。

#### 响应
**成功 (200)**
```json
{
  "uid": "area_health123",
  "name": "健康与运动",
  "description": "健康管理、锻炼和运动项目"
}
```

#### 错误响应
| 状态码 | 说明 |
|--------|------|
| 400 | 无效的UID格式 |
| 404 | 区域不存在或不属于当前用户 |
| 400 | 更新失败，包含详细错误信息 |
| 500 | 服务器内部错误 |

---

### 5. 删除区域

#### 请求
```http
DELETE /api/areas/area_health123
```

#### 路径参数
| 参数 | 类型 | 必填 | 说明 |
|------|------|------|------|
| uid | string | 是 | 区域UID |

#### 响应
**成功 (204)**
```
No Content
```

#### 错误响应
| 状态码 | 说明 |
|--------|------|
| 400 | 无效的UID格式 |
| 404 | 区域不存在或不属于当前用户 |
| 400 | 删除失败（可能有关联数据） |
| 500 | 服务器内部错误 |

## 层级结构

### 区域与项目的关系
```
用户
  └── 区域 (Area)
        └── 项目 (Project)
              └── 任务 (Task)
                    └── 标签 (Tag)
```

### 说明
- 一个用户可以有多个区域
- 一个区域可以有多个项目
- 区域帮助对项目进行粗粒度分类
- 项目是对区域的具体化

## 使用场景

### 示例区域分类
1. **工作**：职业相关的项目
2. **个人**：个人生活项目
3. **学习**：教育、技能提升项目
4. **健康**：健身、医疗项目
5. **财务**：理财、投资项目
6. **家庭**：家庭事务项目

### 项目关联
- 创建项目时，可以选择所属区域
- 项目列表可以按区域进行筛选
- 区域可以按名称排序显示

## 注意事项
1. **UID格式**：区域UID以`area_`开头
2. **唯一性**：每个用户的区域名称在同一用户下应该唯一
3. **数据隔离**：用户只能访问自己的区域，无法访问其他用户的区域
4. **级联删除**：删除区域前需要先移除或移动关联的项目
5. **名称验证**：区域名称不能为空或纯空白字符
6. **并发控制**：API不提供特殊的并发控制机制

## 相关端点
- **项目**：`/api/projects/*` - 项目管理（可关联区域）
- **用户**：`/api/users/*` - 用户资料管理
- **管理员API**：`/api/admin/*` - 用户和角色管理

## 最佳实践

### 区域命名
- 使用简洁明了的名称
- 避免过长或过于具体的名称
- 建议不超过10个区域，保持分类清晰

### 描述使用
- 使用描述字段说明该区域的用途
- 可以包含具体的管理策略或原则
- 帮助理解区域的范围和边界

### 项目组织
- 将相关项目放到同一区域下
- 避免将完全无关的项目放在同一区域
- 定期检查和调整区域划分
