# Tududi AI Agent ç³»ç»Ÿ

## é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®æ˜¯ Tududi ä»»åŠ¡ç®¡ç†ç³»ç»Ÿçš„ **AI Agent æ¡†æ¶å®ç°**ã€‚åŸºäº **Mastra æ¡†æ¶** æ„å»ºï¼ŒåŒ…å«äº†å¤šä¸ªä¸“ä¸š AI Agentï¼Œç”¨äºæ™ºèƒ½ç®¡ç†å’Œæ“ä½œ Tududi ä»»åŠ¡ç®¡ç†ç³»ç»Ÿä¸­çš„æ‰€æœ‰èµ„æºã€‚

## ğŸŒŸ æ ¸å¿ƒç‰¹æ€§

- **ğŸ¤– æ™ºèƒ½ Agent æ¶æ„**: 5 ä¸ªä¸“ä¸š AI Agent ååŒå·¥ä½œ
- **ğŸ“Š ç»Ÿä¸€æ•°æ®ç®¡ç†**: è¦†ç›–åŒºåŸŸã€é¡¹ç›®ã€æ ‡ç­¾ã€ç¬”è®°ç­‰æ‰€æœ‰èµ„æº
- **ğŸ” æ™ºèƒ½åˆ†æä¸ç»Ÿè®¡**: è‡ªåŠ¨ç”Ÿæˆæ•°æ®æ¦‚è§ˆå’Œå¥åº·åº¦è¯„ä¼°
- **ğŸ”„ å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†**: åˆ›å»ºã€è¯»å–ã€æ›´æ–°ã€åˆ é™¤æ“ä½œå…¨è¦†ç›–
- **ğŸ—ï¸ æ¨¡å—åŒ–è®¾è®¡**: æ¯ä¸ª Agent ç‹¬ç«‹è´Ÿè´£ç‰¹å®šèµ„æºç±»å‹
- **ğŸ“¦ PostgreSQL å­˜å‚¨**: ä¼ä¸šçº§æ•°æ®æŒä¹…åŒ–

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### Agent å±‚çº§ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Super Agent (æ€»æ§ä¸­å¿ƒ)            â”‚
â”‚    - ç»Ÿä¸€åè°ƒæ‰€æœ‰èµ„æº                      â”‚
â”‚    - æä¾›æ•´ä½“æ•°æ®ç»Ÿè®¡å’Œåˆ†æ                â”‚
â”‚    - æ™ºèƒ½åˆ†æ´¾ä»»åŠ¡ç»™å­ Agent                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚       â”‚       â”‚       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â”€â”
â”‚ Areas Mgr â”‚ â”‚Tags  â”‚ â”‚Projs â”‚ â”‚Notes â”‚
â”‚  Agent    â”‚ â”‚Agent â”‚ â”‚Agent â”‚ â”‚Agent â”‚
â”‚           â”‚ â”‚      â”‚ â”‚      â”‚ â”‚      â”‚
â”‚ åŒºåŸŸç®¡ç†   â”‚ â”‚æ ‡ç­¾  â”‚ â”‚é¡¹ç›®  â”‚ â”‚ç¬”è®°  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®å±‚çº§

```
ç”¨æˆ· (User)
  â””â”€â”€ åŒºåŸŸ (Areas)
        â””â”€â”€ é¡¹ç›® (Projects)
              â”œâ”€â”€ ä»»åŠ¡ (Tasks)
              â”‚     â””â”€â”€ æ ‡ç­¾ (Tags) [å¤šå¯¹å¤š]
              â””â”€â”€ ç¬”è®° (Notes)
                    â””â”€â”€ æ ‡ç­¾ (Tags) [å¤šå¯¹å¤š]
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒå‡†å¤‡

1. ç¡®ä¿å·²å®‰è£…ä¾èµ–ï¼š
```bash
npm install
```

2. é…ç½®ç¯å¢ƒå˜é‡ï¼š
```bash
# Tududi API é…ç½®
TUDUDI_BASE_URL=https://competent_shaw.orb.local

# æ•°æ®åº“é…ç½®
DATABASE_URL=postgresql://postgres:password@localhost:5432/tududi

# ä¼šè¯è®¤è¯
TUDUDI_COOKIE=your_session_cookie_here
```

3. åˆå§‹åŒ– Mastra ç³»ç»Ÿï¼š
```bash
npm run start
```

### é¡¹ç›®ç»“æ„

```
src/mastra/
â”œâ”€â”€ agents/                  # AI Agent å®šä¹‰
â”‚   â”œâ”€â”€ super-agent.ts      # Super Agent (æ€»æ§ä¸­å¿ƒ)
â”‚   â”œâ”€â”€ areas-manager-agent.ts    # åŒºåŸŸç®¡ç† Agent
â”‚   â”œâ”€â”€ projects-manager-agent.ts # é¡¹ç›®ç®¡ç† Agent
â”‚   â”œâ”€â”€ tags-manager-agent.ts     # æ ‡ç­¾ç®¡ç† Agent
â”‚   â””â”€â”€ notes-manager-agent.ts    # ç¬”è®°ç®¡ç† Agent
â”œâ”€â”€ tools/                   # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ area/               # åŒºåŸŸç›¸å…³å·¥å…·
â”‚   â”‚   â”œâ”€â”€ list-areas-tool.ts
â”‚   â”‚   â”œâ”€â”€ get-area-tool.ts
â”‚   â”‚   â”œâ”€â”€ create-area-tool.ts
â”‚   â”‚   â”œâ”€â”€ update-area-tool.ts
â”‚   â”‚   â””â”€â”€ delete-area-tool.ts
â”‚   â”œâ”€â”€ project/            # é¡¹ç›®ç›¸å…³å·¥å…·
â”‚   â”‚   â”œâ”€â”€ list-projects-tool.ts
â”‚   â”‚   â”œâ”€â”€ get-project-tool.ts
â”‚   â”‚   â”œâ”€â”€ create-project-tool.ts
â”‚   â”‚   â”œâ”€â”€ update-project-tool.ts
â”‚   â”‚   â””â”€â”€ delete-project-tool.ts
â”‚   â”œâ”€â”€ tag/                # æ ‡ç­¾ç›¸å…³å·¥å…·
â”‚   â””â”€â”€ note/               # ç¬”è®°ç›¸å…³å·¥å…·
â”œâ”€â”€ lib/                    # å…±äº«åº“
â”‚   â””â”€â”€ api-client.ts       # Tududi API å®¢æˆ·ç«¯
â”œâ”€â”€ config.ts               # é…ç½®ç®¡ç†
â”œâ”€â”€ types.ts                # ç±»å‹å®šä¹‰
â””â”€â”€ index.ts                # ç³»ç»Ÿå…¥å£
```

## ğŸ“š Agent è¯¦ç»†è¯´æ˜

### 1. Super Agent (æ€»æ§ä¸­å¿ƒ)

**èŒè´£**:
- è·å–å¹¶æ±‡æ€»æ‰€æœ‰åŒºåŸŸã€æ ‡ç­¾ã€é¡¹ç›®ã€ç¬”è®°çš„çŠ¶æ€
- æä¾›æ•´ä½“æ•°æ®ç»Ÿè®¡å’Œåˆ†æ
- åè°ƒå’Œç®¡ç†å„ç±»èµ„æºçš„ç”Ÿå‘½å‘¨æœŸ
- ä½œä¸ºç³»ç»Ÿçš„ç»Ÿä¸€å…¥å£ï¼Œæ™ºèƒ½åˆ†æ´¾ä»»åŠ¡

**å¯ç”¨å·¥å…·**:
- `listAreasTool` - è·å–æ‰€æœ‰åŒºåŸŸåˆ—è¡¨
- `listTagsTool` - è·å–æ‰€æœ‰æ ‡ç­¾åˆ—è¡¨
- `listProjectsTool` - è·å–é¡¹ç›®åˆ—è¡¨
- `listNotesTool` - è·å–ç¬”è®°åˆ—è¡¨

**å­ Agent å§”æ´¾**:
- `notesManagerAgent` - ç¬”è®°ç›¸å…³æ“ä½œ
- `tagsManagerAgent` - æ ‡ç­¾ç›¸å…³æ“ä½œ
- `areasManagerAgent` - åŒºåŸŸç›¸å…³æ“ä½œ
- `projectsManagerAgent` - é¡¹ç›®ç›¸å…³æ“ä½œ

**è¾“å‡ºæŠ¥å‘ŠåŒ…å«**:
1. **æ•°æ®æ¦‚è§ˆ**: åŒºåŸŸã€æ ‡ç­¾ã€é¡¹ç›®ã€ç¬”è®°æ€»æ•°ç»Ÿè®¡
2. **é¡¹ç›®çŠ¶æ€åˆ†æ**: æŒ‰çŠ¶æ€åˆ†ç±» (planned/in_progress/blocked/idea/completed)
3. **èµ„æºä½¿ç”¨æƒ…å†µ**: å„åŒºåŸŸé¡¹ç›®åˆ†å¸ƒã€å¸¸ç”¨æ ‡ç­¾ç»Ÿè®¡
4. **å¥åº·åº¦è¯„ä¼°**: å¼‚å¸¸æé†’ (å¦‚å¤§é‡é˜»å¡é¡¹ç›®ã€æœªä½¿ç”¨åŒºåŸŸ)

### 2. Areas Manager Agent (åŒºåŸŸç®¡ç†)

**èŒè´£**: ä¸“ä¸šçš„åŒºåŸŸç®¡ç†åŠ©æ‰‹

**æ“ä½œ**:
- è·å–æ‰€æœ‰åŒºåŸŸåˆ—è¡¨
- æ ¹æ® UID æŸ¥æ‰¾ç‰¹å®šåŒºåŸŸ
- åˆ›å»ºæ–°åŒºåŸŸ
- æ›´æ–°åŒºåŸŸä¿¡æ¯ï¼ˆåç§°å’Œæè¿°ï¼‰
- åˆ é™¤ä¸éœ€è¦çš„åŒºåŸŸ

**å·¥å…·**:
- `listAreasTool` - è·å–æ‰€æœ‰åŒºåŸŸåˆ—è¡¨
- `getAreaTool` - æ ¹æ® UID æŸ¥æ‰¾ç‰¹å®šåŒºåŸŸ
- `createAreaTool` - åˆ›å»ºæ–°åŒºåŸŸ
- `updateAreaTool` - æ›´æ–°åŒºåŸŸä¿¡æ¯
- `deleteAreaTool` - åˆ é™¤åŒºåŸŸ

**ç‰¹æ€§**:
- åŒºåŸŸæ˜¯é¡¹ç›®çš„ä¸Šçº§åˆ†ç±»
- ä¸€ä¸ªç”¨æˆ·å¯ä»¥æœ‰å¤šä¸ªåŒºåŸŸ
- ä¸€ä¸ªåŒºåŸŸå¯ä»¥æœ‰å¤šä¸ªé¡¹ç›®
- å»ºè®®ä¸è¶…è¿‡ 10 ä¸ªåŒºåŸŸ

### 3. Projects Manager Agent (é¡¹ç›®ç®¡ç†)

**èŒè´£**: ä¸“ä¸šçš„é¡¹ç›®ç®¡ç†åŠ©æ‰‹

**æ“ä½œ**:
- è·å–é¡¹ç›®åˆ—è¡¨ï¼ˆæ”¯æŒå¤šç§è¿‡æ»¤æ¡ä»¶ï¼‰
- æ ¹æ® UID æˆ– slug æŸ¥æ‰¾ç‰¹å®šé¡¹ç›®
- åˆ›å»ºæ–°é¡¹ç›®
- æ›´æ–°é¡¹ç›®ä¿¡æ¯
- åˆ é™¤é¡¹ç›®

**æŸ¥è¯¢è¿‡æ»¤**:
- `state` - æŒ‰é¡¹ç›®çŠ¶æ€è¿‡æ»¤ (planned/in_progress/blocked/idea/completed)
- `active` - æ´»è·ƒé¡¹ç›® (true) æˆ–éæ´»è·ƒé¡¹ç›® (false)
- `pin_to_sidebar` - æ˜¯å¦å›ºå®šåˆ°ä¾§è¾¹æ 
- `area_id` - æŒ‰åŒºåŸŸ ID è¿‡æ»¤
- `area` - æŒ‰åŒºåŸŸæ ‡è¯†ç¬¦è¿‡æ»¤
- `grouped` - æ˜¯å¦æŒ‰åŒºåŸŸåˆ†ç»„è¿”å›

**å·¥å…·**:
- `listProjectsTool` - è·å–é¡¹ç›®åˆ—è¡¨
- `getProjectTool` - æ ¹æ® UID æˆ– slug æŸ¥æ‰¾é¡¹ç›®
- `createProjectTool` - åˆ›å»ºæ–°é¡¹ç›®
- `updateProjectTool` - æ›´æ–°é¡¹ç›®ä¿¡æ¯
- `deleteProjectTool` - åˆ é™¤é¡¹ç›®

**ç‰¹æ€§**:
- æ”¯æŒå¤šæ ‡ç­¾ç®¡ç†
- åŒ…å«ä»»åŠ¡ç»Ÿè®¡ä¿¡æ¯å’Œå®Œæˆç™¾åˆ†æ¯”
- å¯è®¾ç½®åˆ°æœŸæ—¥æœŸ
- æ”¯æŒé¡¹ç›®å…±äº«

### 4. Tags Manager Agent (æ ‡ç­¾ç®¡ç†)

**èŒè´£**: ä¸“ä¸šçš„æ ‡ç­¾ç®¡ç†åŠ©æ‰‹

**æ“ä½œ**:
- è·å–æ‰€æœ‰æ ‡ç­¾åˆ—è¡¨
- æ ¹æ® UID æˆ–åç§°æŸ¥æ‰¾ç‰¹å®šæ ‡ç­¾
- åˆ›å»ºæ–°æ ‡ç­¾
- æ›´æ–°ç°æœ‰æ ‡ç­¾çš„åç§°
- åˆ é™¤ä¸éœ€è¦çš„æ ‡ç­¾

**å·¥å…·**:
- `listTagsTool` - è·å–æ‰€æœ‰æ ‡ç­¾åˆ—è¡¨
- `getTagTool` - æ ¹æ® UID æˆ–åç§°æŸ¥æ‰¾æ ‡ç­¾
- `createTagTool` - åˆ›å»ºæ–°æ ‡ç­¾
- `updateTagTool` - æ›´æ–°æ ‡ç­¾åç§°
- `deleteTagTool` - åˆ é™¤æ ‡ç­¾

**ç‰¹æ€§**:
- æ ‡ç­¾æ˜¯è·¨é¡¹ç›®çš„é€šç”¨åˆ†ç±»ç³»ç»Ÿ
- ç›¸åŒåç§°çš„æ ‡ç­¾ä¼šè¢«å¤ç”¨
- æ ‡ç­¾åœ¨æ‰€æœ‰é¡¹ç›®ä¸­é€šç”¨
- åˆ é™¤æ ‡ç­¾ä¼šä»æ‰€æœ‰å…³è”çš„ä»»åŠ¡å’Œç¬”è®°ä¸­ç§»é™¤

### 5. Notes Manager Agent (ç¬”è®°ç®¡ç†)

**èŒè´£**: ä¸“ä¸šçš„ç¬”è®°ç®¡ç†åŠ©æ‰‹

**æ“ä½œ**:
- åˆ›å»ºæ–°ç¬”è®°ï¼Œæ”¯æŒ Markdown æ ¼å¼å’Œæ ‡ç­¾ç®¡ç†
- æœç´¢å’ŒæŸ¥æ‰¾ç¬”è®°å†…å®¹
- è·å–ç¬”è®°åˆ—è¡¨å’Œè¯¦æƒ…
- æ›´æ–°å’Œç¼–è¾‘ç°æœ‰ç¬”è®°
- åˆ é™¤ç¬”è®°

**å·¥å…·**:
- `createNoteTool` - åˆ›å»ºæ–°ç¬”è®°
- `searchNotesTool` - æ ¹æ®å…³é”®è¯æœç´¢ç¬”è®°
- `listNotesTool` - è·å–ç¬”è®°åˆ—è¡¨
- `getNoteTool` - è·å–ç‰¹å®šç¬”è®°è¯¦æƒ…
- `updateNoteTool` - æ›´æ–°ç¬”è®°å†…å®¹
- `deleteNoteTool` - åˆ é™¤ç¬”è®°

## ğŸ”§ æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: Mastra (AI Agent æ¡†æ¶)
- **AI æ¨¡å‹**: zhipuai-coding-plan/glm-4.6
- **å­˜å‚¨**: PostgreSQL (é€šè¿‡ `@mastra/pg`)
- **æ—¥å¿—**: Pino Logger
- **HTTP å®¢æˆ·ç«¯**: Axios
- **æ•°æ®éªŒè¯**: Zod
- **å¼€å‘è¯­è¨€**: TypeScript

## ğŸŒ API å®¢æˆ·ç«¯

é¡¹ç›®åŒ…å«ä¸€ä¸ªå®Œæ•´çš„ Tududi API å®¢æˆ·ç«¯ (`src/mastra/lib/api-client.ts`)ï¼Œæä¾›ï¼š

### æ ¸å¿ƒåŠŸèƒ½

- **é€šç”¨è¯·æ±‚**: `apiRequest()` - æ”¯æŒè‡ªå®šä¹‰è¯·æ±‚é…ç½®
- **é‡è¯•æœºåˆ¶**: `apiRequestWithRetry()` - è‡ªåŠ¨å¤„ç†æ•°æ®åº“é”å®šé”™è¯¯
- **ç®€åŒ–æ–¹æ³•**: `apiGet()`, `apiPost()`, `apiPatch()`, `apiDelete()`

### ç‰¹æ€§

- âœ… è‡ªåŠ¨å¿½ç•¥è‡ªç­¾åè¯ä¹¦é”™è¯¯
- âœ… è‡ªåŠ¨å¤„ç† Cookie è®¤è¯
- âœ… æŒ‡æ•°é€€é¿é‡è¯•æœºåˆ¶ (3 æ¬¡å°è¯•)
- âœ… æ”¯æŒæŸ¥è¯¢å‚æ•°å’Œè¯·æ±‚ä½“
- âœ… è¯¦ç»†çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•

### ä½¿ç”¨ç¤ºä¾‹

```typescript
import { apiGet, apiPost } from './lib/api-client';

// è·å–æ•°æ®
const result = await apiGet('/api/areas', { limit: '20' }, cookie);

// åˆ›å»ºæ•°æ®
const newProject = await apiPost('/api/project', {
  name: 'æ–°é¡¹ç›®',
  state: 'planned',
  tags: [{ name: 'é‡è¦' }]
}, cookie);
```

## ğŸ“Š æ•°æ®æ¨¡å‹

### åŒºåŸŸ (Areas)
```typescript
{
  id: number;           // æ•°æ®åº“ ID
  uid: string;          // å”¯ä¸€æ ‡è¯†ç¬¦ (ä»¥ "area_" å¼€å¤´)
  name: string;         // åŒºåŸŸåç§°
  description?: string; // åŒºåŸŸæè¿°
}
```

### é¡¹ç›® (Projects)
```typescript
{
  id: number;                    // æ•°æ®åº“ ID
  uid: string;                   // å”¯ä¸€æ ‡è¯†ç¬¦ (ä»¥ "proj_" å¼€å¤´)
  name: string;                  // é¡¹ç›®åç§°
  description?: string;          // é¡¹ç›®æè¿°
  state: 'planned' | 'in_progress' | 'blocked' | 'idea' | 'completed'; // é¡¹ç›®çŠ¶æ€
  area_id?: number;              // å…³è”åŒºåŸŸ ID
  pin_to_sidebar?: boolean;      // æ˜¯å¦å›ºå®šåˆ°ä¾§è¾¹æ 
  due_date_at?: string;          // åˆ°æœŸæ—¥æœŸ (ISO æ ¼å¼)
  image_url?: string;            // é¡¹ç›®å›¾ç‰‡ URL
  task_status?: object;          // ä»»åŠ¡ç»Ÿè®¡ä¿¡æ¯
  completion_percentage?: number; // å®Œæˆç™¾åˆ†æ¯”
  tags: Array<{ id: number; uid: string; name: string; }>; // å…³è”æ ‡ç­¾
}
```

### æ ‡ç­¾ (Tags)
```typescript
{
  id: number;           // æ•°æ®åº“ ID
  uid: string;          // å”¯ä¸€æ ‡è¯†ç¬¦
  name: string;         // æ ‡ç­¾åç§° (è·¨é¡¹ç›®é€šç”¨)
}
```

### ç¬”è®° (Notes)
```typescript
{
  uid: string;          // å”¯ä¸€æ ‡è¯†ç¬¦
  title: string;        // ç¬”è®°æ ‡é¢˜
  content?: string;     // ç¬”è®°å†…å®¹ (æ”¯æŒ Markdown)
  project_id?: number;  // å…³è”é¡¹ç›® ID
  user_id?: number;     // ç”¨æˆ· ID
  created_at?: string;  // åˆ›å»ºæ—¶é—´
  updated_at?: string;  // æ›´æ–°æ—¶é—´
  tags: Array<{ name: string; uid: string; }>; // å…³è”æ ‡ç­¾
  Project?: { name: string; uid: string; } | null; // å…³è”é¡¹ç›®ä¿¡æ¯
}
```

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### åœºæ™¯ 1: è·å–ç³»ç»Ÿæ•´ä½“çŠ¶æ€
```typescript
// è°ƒç”¨ Super Agent
"è¯·æä¾›å½“å‰ç³»ç»Ÿçš„æ•´ä½“æ•°æ®æ¦‚è§ˆ"
```
è¾“å‡º: åŒ…å«æ‰€æœ‰åŒºåŸŸã€é¡¹ç›®ã€æ ‡ç­¾ã€ç¬”è®°çš„ç»Ÿè®¡æ•°æ®å’Œåˆ†æ

### åœºæ™¯ 2: åˆ›å»ºæ–°é¡¹ç›®
```typescript
// è°ƒç”¨ Projects Manager Agent
"åˆ›å»ºä¸€ä¸ªåä¸º 'AI Agent é¡¹ç›®' çš„é¡¹ç›®ï¼ŒçŠ¶æ€ä¸ºè¿›è¡Œä¸­ï¼Œæ ‡ç­¾åŒ…å« 'AI' å’Œ 'Mastra'"
```
è¾“å‡º: æ–°é¡¹ç›®åˆ›å»ºæˆåŠŸï¼ŒåŒ…å«æ‰€æœ‰å…³è”ä¿¡æ¯

### åœºæ™¯ 3: æœç´¢ç¬”è®°
```typescript
// è°ƒç”¨ Notes Manager Agent
"æœç´¢åŒ…å« 'Mastra' å…³é”®è¯çš„ç¬”è®°"
```
è¾“å‡º: æ‰€æœ‰åŒ¹é…çš„ç¬”è®°åˆ—è¡¨

### åœºæ™¯ 4: ç®¡ç†æ ‡ç­¾
```typescript
// è°ƒç”¨ Tags Manager Agent
"å°†æ ‡ç­¾ 'é‡è¦' é‡å‘½åä¸º 'é«˜ä¼˜å…ˆçº§'"
```
è¾“å‡º: æ ‡ç­¾æ›´æ–°æˆåŠŸï¼Œè‡ªåŠ¨æ›´æ–°æ‰€æœ‰å…³è”çš„ä»»åŠ¡å’Œç¬”è®°

## ğŸ” è®¤è¯ä¸æƒé™

### ä¼šè¯è®¤è¯
- ä½¿ç”¨ `TUDUDI_COOKIE` ç¯å¢ƒå˜é‡å­˜å‚¨ä¼šè¯ Cookie
- API å®¢æˆ·ç«¯è‡ªåŠ¨åœ¨è¯·æ±‚ä¸­åŒ…å« Cookie
- æ‰€æœ‰å·¥å…·æ‰§è¡Œæ—¶ä» `runtimeContext` è·å– Cookie

### æƒé™ç®¡ç†
- åŸºäº Tududi API çš„ç°æœ‰æƒé™ç³»ç»Ÿ
- Agent æ“ä½œéµå¾ªç”¨æˆ·çš„æƒé™çº§åˆ«
- å…±äº«èµ„æºåŸºäºå…±äº«è®¾ç½®è¿›è¡Œè®¿é—®æ§åˆ¶

## ğŸ“ˆ ç›‘æ§ä¸æ—¥å¿—

### æ—¥å¿—é…ç½®
- ä½¿ç”¨ **Pino Logger** è¿›è¡Œç»“æ„åŒ–æ—¥å¿—è®°å½•
- æ—¥å¿—çº§åˆ«: `info` (å¯é…ç½®)
- æ—¥å¿—åç§°: 'Mastra'

### è§‚æµ‹æ€§
- **é»˜è®¤å¯¼å‡ºå™¨**: å¯ç”¨ AI è¿½è¸ª
- **äº‘å¯¼å‡ºå™¨**: æ”¯æŒäº‘ç«¯è§‚æµ‹ (å¯é€‰)
- å»ºè®®å¯ç”¨è§‚æµ‹æ€§ä»¥è·å¾—æ›´å¥½çš„æ€§èƒ½åˆ†æ

### å†…å­˜ç®¡ç†
- å¯é€‰å¯ç”¨ **Memory** åŠŸèƒ½ä¿æŒå¯¹è¯ä¸Šä¸‹æ–‡
- ä½¿ç”¨ PostgreSQL å­˜å‚¨ä¼šè¯å†å²
- å½“å‰ç‰ˆæœ¬é»˜è®¤ç¦ç”¨ Memory ä»¥æé«˜æ€§èƒ½

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æ•°æ®åº“è¿æ¥å¤±è´¥**
   - æ£€æŸ¥ `DATABASE_URL` ç¯å¢ƒå˜é‡
   - ç¡®ä¿ PostgreSQL æœåŠ¡æ­£åœ¨è¿è¡Œ
   - éªŒè¯è¿æ¥å­—ç¬¦ä¸²æ ¼å¼

2. **API è®¤è¯å¤±è´¥**
   - ç¡®è®¤ `TUDUDI_COOKIE` å·²æ­£ç¡®è®¾ç½®
   - éªŒè¯ Cookie æ˜¯å¦æœ‰æ•ˆ
   - æ£€æŸ¥ API åŸºç¡€ URL æ˜¯å¦å¯è®¿é—®

3. **Agent å“åº”ç¼“æ…¢**
   - æ£€æŸ¥ç½‘ç»œè¿æ¥
   - ç¡®è®¤ AI æ¨¡å‹æœåŠ¡çŠ¶æ€
   - è°ƒæ•´æŸ¥è¯¢å‚æ•°ä»¥å‡å°‘æ•°æ®é‡

4. **å·¥å…·è°ƒç”¨å¤±è´¥**
   - éªŒè¯è¾“å…¥å‚æ•°æ˜¯å¦ç¬¦åˆ Zod æ¨¡å¼
   - æ£€æŸ¥ API ç«¯ç‚¹æ˜¯å¦å¯è®¿é—®
   - æŸ¥çœ‹é”™è¯¯æ—¥å¿—è·å–è¯¦ç»†ä¿¡æ¯

## ğŸ“ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°å·¥å…·

1. åœ¨å¯¹åº”ç›®å½•åˆ›å»ºå·¥å…·æ–‡ä»¶:
```typescript
// src/mastra/tools/area/my-new-tool.ts
import { createTool } from "@mastra/core/tools";
import { z } from "zod";
import { apiPost } from "../../lib/api-client";

export const myNewTool = createTool({
  id: "my-new-tool",
  description: "å·¥å…·æè¿°",
  inputSchema: z.object({
    // è¾“å…¥å‚æ•°
  }),
  outputSchema: z.object({
    // è¾“å‡ºæ ¼å¼
  }),
  execute: async ({ context, runtimeContext }) => {
    // å®ç°é€»è¾‘
  },
});
```

2. åœ¨å¯¹åº” Agent ä¸­å¯¼å…¥å¹¶æ³¨å†Œ:
```typescript
// src/mastra/agents/areas-manager-agent.ts
import { myNewTool } from "../tools/area/my-new-tool";

export const areasManagerAgent = new Agent({
  tools: { myNewTool },
  // ... å…¶ä»–é…ç½®
});
```

### æ‰©å±• Agent åŠŸèƒ½

1. æ›´æ–° Agent æŒ‡ä»¤ (instructions)
2. æ·»åŠ æ–°å·¥å…·
3. åœ¨ Super Agent ä¸­æ³¨å†Œå­ Agent

## ğŸ“š ç›¸å…³èµ„æº

- **Mastra æ¡†æ¶**: https://mastra.ai/
- **Tududi é¡¹ç›®**: https://github.com/chrisvel/tududi
- **PostgreSQL**: https://www.postgresql.org/
- **Pino Logger**: https://github.com/pinojs/pino
- **Zod éªŒè¯**: https://zod.dev/

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](../../LICENSE) æ–‡ä»¶

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

---

**æ³¨æ„**: è¿™æ˜¯ä¸€ä¸ª AI Agent ç³»ç»Ÿæ–‡æ¡£ã€‚å¦‚éœ€äº†è§£åº•å±‚ Tududi REST APIï¼Œè¯·å‚è€ƒ [doc/api/](../doc/api/) ç›®å½•ã€‚
