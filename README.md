# Tududi AI Agent ç³»ç»Ÿ

## é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®æ˜¯ Tududi ä»»åŠ¡ç®¡ç†ç³»ç»Ÿçš„ **AI Agent æ¡†æ¶å®ç°**ã€‚åŸºäº **Mastra æ¡†æ¶** æ„å»ºï¼ŒåŒ…å«äº†å¤šä¸ªä¸“ä¸š AI Agentï¼Œç”¨äºæ™ºèƒ½ç®¡ç†å’Œæ“ä½œ Tududi ä»»åŠ¡ç®¡ç†ç³»ç»Ÿä¸­çš„æ‰€æœ‰èµ„æºã€‚

## ğŸŒŸ æ ¸å¿ƒç‰¹æ€§

- **ğŸ¤– æ™ºèƒ½ Agent æ¶æ„**: 8 ä¸ªä¸“ä¸š AI Agent ååŒå·¥ä½œ
- **ğŸ“Š ç»Ÿä¸€æ•°æ®ç®¡ç†**: è¦†ç›–åŒºåŸŸã€é¡¹ç›®ã€ä»»åŠ¡ã€æ ‡ç­¾ã€ç¬”è®°ã€æ”¶ä»¶ç®±ç­‰æ‰€æœ‰èµ„æº
- **ğŸ” æ™ºèƒ½æœç´¢ä¸åˆ†æ**: å…¨æ–‡æœç´¢ã€å‘é‡æœç´¢å’Œæ•°æ®æ¦‚è§ˆåˆ†æ
- **ğŸ“¥ æ”¶ä»¶ç®±ç®¡ç†**: æ™ºèƒ½å¤„ç†å’Œåˆ†ç±»å¾…åŠäº‹é¡¹
- **ğŸ¯ ä»»åŠ¡ç®¡ç†**: å®Œæ•´çš„ä»»åŠ¡ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œæ”¯æŒå­ä»»åŠ¡å’Œé‡å¤ä»»åŠ¡
- **ğŸ§  å‘é‡å­˜å‚¨**: GLM åµŒå…¥æ¨¡å‹æ”¯æŒçš„æ™ºèƒ½æ–‡æ¡£æœç´¢
- **ğŸ”„ å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†**: åˆ›å»ºã€è¯»å–ã€æ›´æ–°ã€åˆ é™¤æ“ä½œå…¨è¦†ç›–
- **âš™ï¸ è‡ªåŠ¨åŒ–å·¥ä½œæµ**: å¤šæ­¥éª¤è‡ªåŠ¨åŒ–æµç¨‹ï¼Œæ”¯æŒæ¡ä»¶åˆ†æ”¯å’Œæ™ºèƒ½å†³ç­–
- **ğŸ—ï¸ æ¨¡å—åŒ–è®¾è®¡**: æ¯ä¸ª Agent ç‹¬ç«‹è´Ÿè´£ç‰¹å®šèµ„æºç±»å‹
- **ğŸ“¦ PostgreSQL å­˜å‚¨**: ä¼ä¸šçº§æ•°æ®æŒä¹…åŒ–

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### Agent å±‚çº§ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Super Agent (æ€»æ§ä¸­å¿ƒ)            â”‚
â”‚    - ç»Ÿä¸€åè°ƒæ‰€æœ‰èµ„æº                      â”‚
â”‚    - æä¾›æ•´ä½“æ•°æ®ç»Ÿè®¡å’Œåˆ†æ                â”‚
â”‚    - æ™ºèƒ½åˆ†æ´¾ä»»åŠ¡ç»™å­ Agent                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”â”Œâ”€â–¼â”€â”€â”â”Œâ”€â–¼â”€â”€â”â”Œâ”€â–¼â”€â”€â”â”Œâ”€â–¼â”€â”€â”â”Œâ”€â–¼â”€â”€â”â”Œâ”€â–¼â”€â”€â”â”Œâ”€â–¼â”€â”€â”
â”‚Areas â”‚â”‚Tagsâ”‚â”‚Projâ”‚â”‚Noteâ”‚â”‚Taskâ”‚â”‚Inbxâ”‚â”‚Srchâ”‚â”‚Vctrâ”‚
â”‚ Mgr  â”‚â”‚Mgr â”‚â”‚Mgr â”‚â”‚Mgr â”‚â”‚Mgr â”‚â”‚Mgr â”‚â”‚Mgr â”‚â”‚Mgr â”‚
â”‚      â”‚â”‚    â”‚â”‚    â”‚â”‚    â”‚â”‚    â”‚â”‚    â”‚â”‚    â”‚â”‚    â”‚
â”‚åŒºåŸŸ  â”‚â”‚æ ‡ç­¾â”‚â”‚é¡¹ç›®â”‚â”‚ç¬”è®°â”‚â”‚ä»»åŠ¡â”‚â”‚æ”¶ä»¶â”‚â”‚æœç´¢â”‚â”‚å‘é‡â”‚
â”‚ç®¡ç†  â”‚â”‚ç®¡ç†â”‚â”‚ç®¡ç†â”‚â”‚ç®¡ç†â”‚â”‚ç®¡ç†â”‚â”‚ç®±  â”‚â”‚ç®¡ç†â”‚â”‚å­˜å‚¨â”‚
â””â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”˜
```

### æ•°æ®å±‚çº§

```
ç”¨æˆ· (User)
  â”œâ”€â”€ æ”¶ä»¶ç®± (Inbox Items) - å¾…å¤„ç†é¡¹ç›®
  â”œâ”€â”€ åŒºåŸŸ (Areas)
  â”‚     â””â”€â”€ é¡¹ç›® (Projects)
  â”‚           â”œâ”€â”€ ä»»åŠ¡ (Tasks)
  â”‚           â”‚     â”œâ”€â”€ å­ä»»åŠ¡ (Subtasks)
  â”‚           â”‚     â””â”€â”€ æ ‡ç­¾ (Tags) [å¤šå¯¹å¤š]
  â”‚           â””â”€â”€ ç¬”è®° (Notes)
  â”‚                 â””â”€â”€ æ ‡ç­¾ (Tags) [å¤šå¯¹å¤š]
  â””â”€â”€ å‘é‡å­˜å‚¨ (Vector Store) - AI æœç´¢å’ŒåµŒå…¥
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒå‡†å¤‡

1. ç¡®ä¿å·²å®‰è£…ä¾èµ–ï¼š
```bash
npm install
```

2. é…ç½®ç¯å¢ƒå˜é‡ï¼š
```bash
# Tududi API é…ç½®
TUDUDI_BASE_URL=https://competent_shaw.orb.local

# æ•°æ®åº“é…ç½®
DATABASE_URL=postgresql://postgres:password@localhost:5432/tududi

# ä¼šè¯è®¤è¯
TUDUDI_COOKIE=your_session_cookie_here

# AI æ¨¡å‹é…ç½®ï¼ˆç”¨äºå·¥ä½œæµæ–‡æœ¬å¢å¼ºåŠŸèƒ½ï¼‰
ZHIPU_API_KEY=your_zhipu_api_key_here  # å¯é€‰ï¼Œç”¨äºæ”¶ä»¶ç®±é¡¹ç›®å¤„ç†å·¥ä½œæµçš„ AI æ–‡æœ¬å¢å¼º
```

3. åˆå§‹åŒ– Mastra ç³»ç»Ÿï¼š
```bash
npm run start
```

### é¡¹ç›®ç»“æ„

```
src/mastra/
â”œâ”€â”€ agents/                  # AI Agent å®šä¹‰
â”‚   â”œâ”€â”€ super-agent.ts      # Super Agent (æ€»æ§ä¸­å¿ƒ)
â”‚   â”œâ”€â”€ areas-manager-agent.ts    # åŒºåŸŸç®¡ç† Agent
â”‚   â”œâ”€â”€ projects-manager-agent.ts # é¡¹ç›®ç®¡ç† Agent
â”‚   â”œâ”€â”€ tasks-manager-agent.ts    # ä»»åŠ¡ç®¡ç† Agent
â”‚   â”œâ”€â”€ tags-manager-agent.ts     # æ ‡ç­¾ç®¡ç† Agent
â”‚   â”œâ”€â”€ notes-manager-agent.ts    # ç¬”è®°ç®¡ç† Agent
â”‚   â”œâ”€â”€ inbox-manager-agent.ts    # æ”¶ä»¶ç®±ç®¡ç† Agent
â”‚   â”œâ”€â”€ search-manager-agent.ts   # æœç´¢ç®¡ç† Agent
â”‚   â”œâ”€â”€ vector-searcher-agent.ts  # å‘é‡æœç´¢ Agent
â”‚   â””â”€â”€ vector-writer-agent.ts    # å‘é‡å†™å…¥ Agent
â”œâ”€â”€ tools/                   # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ area/               # åŒºåŸŸç›¸å…³å·¥å…·
â”‚   â”œâ”€â”€ project/            # é¡¹ç›®ç›¸å…³å·¥å…·
â”‚   â”œâ”€â”€ task/               # ä»»åŠ¡ç›¸å…³å·¥å…·
â”‚   â”‚   â”œâ”€â”€ create-task-tool.ts
â”‚   â”‚   â”œâ”€â”€ update-task-tool.ts
â”‚   â”‚   â”œâ”€â”€ delete-task-tool.ts
â”‚   â”‚   â”œâ”€â”€ get-task-tool.ts
â”‚   â”‚   â”œâ”€â”€ list-tasks-tool.ts
â”‚   â”‚   â”œâ”€â”€ toggle-task-completion-tool.ts
â”‚   â”‚   â”œâ”€â”€ toggle-task-today-tool.ts
â”‚   â”‚   â”œâ”€â”€ get-task-subtasks-tool.ts
â”‚   â”‚   â”œâ”€â”€ get-task-next-iterations-tool.ts
â”‚   â”‚   â””â”€â”€ generate-recurring-tasks-tool.ts
â”‚   â”œâ”€â”€ inbox/              # æ”¶ä»¶ç®±ç›¸å…³å·¥å…·
â”‚   â”‚   â”œâ”€â”€ create-inbox-item-tool.ts
â”‚   â”‚   â”œâ”€â”€ update-inbox-item-tool.ts
â”‚   â”‚   â”œâ”€â”€ delete-inbox-item-tool.ts
â”‚   â”‚   â”œâ”€â”€ get-inbox-item-tool.ts
â”‚   â”‚   â”œâ”€â”€ list-inbox-items-tool.ts
â”‚   â”‚   â”œâ”€â”€ process-inbox-item-tool.ts
â”‚   â”‚   â””â”€â”€ analyze-text-tool.ts
â”‚   â”œâ”€â”€ search/             # æœç´¢ç›¸å…³å·¥å…·
â”‚   â”‚   â””â”€â”€ search-tool.ts
â”‚   â”œâ”€â”€ vector/             # å‘é‡å­˜å‚¨å·¥å…·
â”‚   â”‚   â”œâ”€â”€ create-vector-index-tool.ts
â”‚   â”‚   â”œâ”€â”€ add-vector-data-tool.ts
â”‚   â”‚   â”œâ”€â”€ search-vector-data-tool.ts
â”‚   â”‚   â””â”€â”€ delete-vector-data-tool.ts
â”‚   â”œâ”€â”€ tag/                # æ ‡ç­¾ç›¸å…³å·¥å…·
â”‚   â””â”€â”€ note/               # ç¬”è®°ç›¸å…³å·¥å…·
â”œâ”€â”€ workflows/              # å·¥ä½œæµå®šä¹‰
â”‚   â””â”€â”€ process-inbox-item-workflow.ts  # æ”¶ä»¶ç®±é¡¹ç›®å¤„ç†å·¥ä½œæµ
â”œâ”€â”€ lib/                    # å…±äº«åº“
â”‚   â””â”€â”€ api-client.ts       # Tududi API å®¢æˆ·ç«¯
â”œâ”€â”€ glm-embedding.ts        # GLM åµŒå…¥æ¨¡å‹
â”œâ”€â”€ vector-store.ts         # å‘é‡å­˜å‚¨ç®¡ç†
â”œâ”€â”€ storage.ts              # å­˜å‚¨é…ç½®
â”œâ”€â”€ config.ts               # é…ç½®ç®¡ç†
â”œâ”€â”€ types.ts                # ç±»å‹å®šä¹‰
â””â”€â”€ index.ts                # ç³»ç»Ÿå…¥å£
```

## ğŸ“š Agent è¯¦ç»†è¯´æ˜

### 1. Super Agent (æ€»æ§ä¸­å¿ƒ)

**èŒè´£**:
- è·å–å¹¶æ±‡æ€»æ‰€æœ‰åŒºåŸŸã€æ ‡ç­¾ã€é¡¹ç›®ã€ç¬”è®°çš„çŠ¶æ€
- æä¾›æ•´ä½“æ•°æ®ç»Ÿè®¡å’Œåˆ†æ
- åè°ƒå’Œç®¡ç†å„ç±»èµ„æºçš„ç”Ÿå‘½å‘¨æœŸ
- ä½œä¸ºç³»ç»Ÿçš„ç»Ÿä¸€å…¥å£ï¼Œæ™ºèƒ½åˆ†æ´¾ä»»åŠ¡

**å¯ç”¨å·¥å…·**:
- `listAreasTool` - è·å–æ‰€æœ‰åŒºåŸŸåˆ—è¡¨
- `listTagsTool` - è·å–æ‰€æœ‰æ ‡ç­¾åˆ—è¡¨
- `listProjectsTool` - è·å–é¡¹ç›®åˆ—è¡¨
- `listNotesTool` - è·å–ç¬”è®°åˆ—è¡¨

**å­ Agent å§”æ´¾**:
- `notesManagerAgent` - ç¬”è®°ç›¸å…³æ“ä½œ
- `tagsManagerAgent` - æ ‡ç­¾ç›¸å…³æ“ä½œ
- `areasManagerAgent` - åŒºåŸŸç›¸å…³æ“ä½œ
- `projectsManagerAgent` - é¡¹ç›®ç›¸å…³æ“ä½œ
- `tasksManagerAgent` - ä»»åŠ¡ç›¸å…³æ“ä½œ
- `inboxManagerAgent` - æ”¶ä»¶ç®±ç›¸å…³æ“ä½œ
- `searchManagerAgent` - æœç´¢ç›¸å…³æ“ä½œ
- `vectorSearcherAgent` - å‘é‡æœç´¢æ“ä½œ
- `vectorWriterAgent` - å‘é‡å†™å…¥æ“ä½œ

**å¯ç”¨å·¥ä½œæµ**:
- `processInboxItemWorkflow` - è‡ªåŠ¨åŒ–å¤„ç†æ”¶ä»¶ç®±é¡¹ç›®ï¼Œæ™ºèƒ½åˆ†æå¹¶åˆ›å»ºä»»åŠ¡æˆ–ç¬”è®°

**è¾“å‡ºæŠ¥å‘ŠåŒ…å«**:
1. **æ•°æ®æ¦‚è§ˆ**: åŒºåŸŸã€æ ‡ç­¾ã€é¡¹ç›®ã€ç¬”è®°æ€»æ•°ç»Ÿè®¡
2. **é¡¹ç›®çŠ¶æ€åˆ†æ**: æŒ‰çŠ¶æ€åˆ†ç±» (planned/in_progress/blocked/idea/completed)
3. **èµ„æºä½¿ç”¨æƒ…å†µ**: å„åŒºåŸŸé¡¹ç›®åˆ†å¸ƒã€å¸¸ç”¨æ ‡ç­¾ç»Ÿè®¡
4. **å¥åº·åº¦è¯„ä¼°**: å¼‚å¸¸æé†’ (å¦‚å¤§é‡é˜»å¡é¡¹ç›®ã€æœªä½¿ç”¨åŒºåŸŸ)

### 2. Areas Manager Agent (åŒºåŸŸç®¡ç†)

**èŒè´£**: ä¸“ä¸šçš„åŒºåŸŸç®¡ç†åŠ©æ‰‹

**æ“ä½œ**:
- è·å–æ‰€æœ‰åŒºåŸŸåˆ—è¡¨
- æ ¹æ® UID æŸ¥æ‰¾ç‰¹å®šåŒºåŸŸ
- åˆ›å»ºæ–°åŒºåŸŸ
- æ›´æ–°åŒºåŸŸä¿¡æ¯ï¼ˆåç§°å’Œæè¿°ï¼‰
- åˆ é™¤ä¸éœ€è¦çš„åŒºåŸŸ

**å·¥å…·**:
- `listAreasTool` - è·å–æ‰€æœ‰åŒºåŸŸåˆ—è¡¨
- `getAreaTool` - æ ¹æ® UID æŸ¥æ‰¾ç‰¹å®šåŒºåŸŸ
- `createAreaTool` - åˆ›å»ºæ–°åŒºåŸŸ
- `updateAreaTool` - æ›´æ–°åŒºåŸŸä¿¡æ¯
- `deleteAreaTool` - åˆ é™¤åŒºåŸŸ

**ç‰¹æ€§**:
- åŒºåŸŸæ˜¯é¡¹ç›®çš„ä¸Šçº§åˆ†ç±»
- ä¸€ä¸ªç”¨æˆ·å¯ä»¥æœ‰å¤šä¸ªåŒºåŸŸ
- ä¸€ä¸ªåŒºåŸŸå¯ä»¥æœ‰å¤šä¸ªé¡¹ç›®
- å»ºè®®ä¸è¶…è¿‡ 10 ä¸ªåŒºåŸŸ

### 3. Projects Manager Agent (é¡¹ç›®ç®¡ç†)

**èŒè´£**: ä¸“ä¸šçš„é¡¹ç›®ç®¡ç†åŠ©æ‰‹

**æ“ä½œ**:
- è·å–é¡¹ç›®åˆ—è¡¨ï¼ˆæ”¯æŒå¤šç§è¿‡æ»¤æ¡ä»¶ï¼‰
- æ ¹æ® UID æˆ– slug æŸ¥æ‰¾ç‰¹å®šé¡¹ç›®
- åˆ›å»ºæ–°é¡¹ç›®
- æ›´æ–°é¡¹ç›®ä¿¡æ¯
- åˆ é™¤é¡¹ç›®

**æŸ¥è¯¢è¿‡æ»¤**:
- `state` - æŒ‰é¡¹ç›®çŠ¶æ€è¿‡æ»¤ (planned/in_progress/blocked/idea/completed)
- `active` - æ´»è·ƒé¡¹ç›® (true) æˆ–éæ´»è·ƒé¡¹ç›® (false)
- `pin_to_sidebar` - æ˜¯å¦å›ºå®šåˆ°ä¾§è¾¹æ 
- `area_id` - æŒ‰åŒºåŸŸ ID è¿‡æ»¤
- `area` - æŒ‰åŒºåŸŸæ ‡è¯†ç¬¦è¿‡æ»¤
- `grouped` - æ˜¯å¦æŒ‰åŒºåŸŸåˆ†ç»„è¿”å›

**å·¥å…·**:
- `listProjectsTool` - è·å–é¡¹ç›®åˆ—è¡¨
- `getProjectTool` - æ ¹æ® UID æˆ– slug æŸ¥æ‰¾é¡¹ç›®
- `createProjectTool` - åˆ›å»ºæ–°é¡¹ç›®
- `updateProjectTool` - æ›´æ–°é¡¹ç›®ä¿¡æ¯
- `deleteProjectTool` - åˆ é™¤é¡¹ç›®

**ç‰¹æ€§**:
- æ”¯æŒå¤šæ ‡ç­¾ç®¡ç†
- åŒ…å«ä»»åŠ¡ç»Ÿè®¡ä¿¡æ¯å’Œå®Œæˆç™¾åˆ†æ¯”
- å¯è®¾ç½®åˆ°æœŸæ—¥æœŸ
- æ”¯æŒé¡¹ç›®å…±äº«

### 4. Tags Manager Agent (æ ‡ç­¾ç®¡ç†)

**èŒè´£**: ä¸“ä¸šçš„æ ‡ç­¾ç®¡ç†åŠ©æ‰‹

**æ“ä½œ**:
- è·å–æ‰€æœ‰æ ‡ç­¾åˆ—è¡¨
- æ ¹æ® UID æˆ–åç§°æŸ¥æ‰¾ç‰¹å®šæ ‡ç­¾
- åˆ›å»ºæ–°æ ‡ç­¾
- æ›´æ–°ç°æœ‰æ ‡ç­¾çš„åç§°
- åˆ é™¤ä¸éœ€è¦çš„æ ‡ç­¾

**å·¥å…·**:
- `listTagsTool` - è·å–æ‰€æœ‰æ ‡ç­¾åˆ—è¡¨
- `getTagTool` - æ ¹æ® UID æˆ–åç§°æŸ¥æ‰¾æ ‡ç­¾
- `createTagTool` - åˆ›å»ºæ–°æ ‡ç­¾
- `updateTagTool` - æ›´æ–°æ ‡ç­¾åç§°
- `deleteTagTool` - åˆ é™¤æ ‡ç­¾

**ç‰¹æ€§**:
- æ ‡ç­¾æ˜¯è·¨é¡¹ç›®çš„é€šç”¨åˆ†ç±»ç³»ç»Ÿ
- ç›¸åŒåç§°çš„æ ‡ç­¾ä¼šè¢«å¤ç”¨
- æ ‡ç­¾åœ¨æ‰€æœ‰é¡¹ç›®ä¸­é€šç”¨
- åˆ é™¤æ ‡ç­¾ä¼šä»æ‰€æœ‰å…³è”çš„ä»»åŠ¡å’Œç¬”è®°ä¸­ç§»é™¤

### 5. Notes Manager Agent (ç¬”è®°ç®¡ç†)

**èŒè´£**: ä¸“ä¸šçš„ç¬”è®°ç®¡ç†åŠ©æ‰‹

**æ“ä½œ**:
- åˆ›å»ºæ–°ç¬”è®°ï¼Œæ”¯æŒ Markdown æ ¼å¼å’Œæ ‡ç­¾ç®¡ç†
- æœç´¢å’ŒæŸ¥æ‰¾ç¬”è®°å†…å®¹
- è·å–ç¬”è®°åˆ—è¡¨å’Œè¯¦æƒ…
- æ›´æ–°å’Œç¼–è¾‘ç°æœ‰ç¬”è®°
- åˆ é™¤ç¬”è®°

**å·¥å…·**:
- `createNoteTool` - åˆ›å»ºæ–°ç¬”è®°
- `searchNotesTool` - æ ¹æ®å…³é”®è¯æœç´¢ç¬”è®°
- `listNotesTool` - è·å–ç¬”è®°åˆ—è¡¨
- `getNoteTool` - è·å–ç‰¹å®šç¬”è®°è¯¦æƒ…
- `updateNoteTool` - æ›´æ–°ç¬”è®°å†…å®¹
- `deleteNoteTool` - åˆ é™¤ç¬”è®°

### 6. Tasks Manager Agent (ä»»åŠ¡ç®¡ç†)

**èŒè´£**: ä¸“ä¸šçš„ä»»åŠ¡ç®¡ç†åŠ©æ‰‹

**æ“ä½œ**:
- åˆ›å»ºæ–°ä»»åŠ¡ï¼Œæ”¯æŒå­ä»»åŠ¡å’Œé‡å¤ä»»åŠ¡
- è·å–ä»»åŠ¡åˆ—è¡¨å’Œè¯¦æƒ…
- æ›´æ–°ä»»åŠ¡ä¿¡æ¯å’ŒçŠ¶æ€
- åˆ é™¤ä»»åŠ¡
- åˆ‡æ¢ä»»åŠ¡å®ŒæˆçŠ¶æ€
- ç®¡ç†ä»Šæ—¥ä»»åŠ¡
- å¤„ç†é‡å¤ä»»åŠ¡ç”Ÿæˆ

**å·¥å…·**:
- `createTaskTool` - åˆ›å»ºæ–°ä»»åŠ¡
- `getTaskTool` - è·å–ç‰¹å®šä»»åŠ¡è¯¦æƒ…
- `listTasksTool` - è·å–ä»»åŠ¡åˆ—è¡¨
- `updateTaskTool` - æ›´æ–°ä»»åŠ¡ä¿¡æ¯
- `deleteTaskTool` - åˆ é™¤ä»»åŠ¡
- `toggleTaskCompletionTool` - åˆ‡æ¢ä»»åŠ¡å®ŒæˆçŠ¶æ€
- `toggleTaskTodayTool` - åˆ‡æ¢ä»Šæ—¥ä»»åŠ¡çŠ¶æ€
- `getTaskSubtasksTool` - è·å–å­ä»»åŠ¡åˆ—è¡¨
- `getTaskNextIterationsTool` - è·å–é‡å¤ä»»åŠ¡çš„ä¸‹æ¬¡è¿­ä»£
- `generateRecurringTasksTool` - ç”Ÿæˆé‡å¤ä»»åŠ¡

**ç‰¹æ€§**:
- æ”¯æŒçˆ¶å­ä»»åŠ¡å…³ç³»
- é‡å¤ä»»åŠ¡è‡ªåŠ¨ç”Ÿæˆ
- ä»Šæ—¥ä»»åŠ¡ç®¡ç†
- ä»»åŠ¡çŠ¶æ€è·Ÿè¸ª
- æ”¯æŒå¤šæ ‡ç­¾åˆ†ç±»

### 7. Inbox Manager Agent (æ”¶ä»¶ç®±ç®¡ç†)

**èŒè´£**: ä¸“ä¸šçš„æ”¶ä»¶ç®±ç®¡ç†åŠ©æ‰‹

**æ“ä½œ**:
- åˆ›å»ºæ”¶ä»¶ç®±é¡¹ç›®
- è·å–æ”¶ä»¶ç®±é¡¹ç›®åˆ—è¡¨
- å¤„ç†å’Œåˆ†ç±»æ”¶ä»¶ç®±é¡¹ç›®
- æ›´æ–°æ”¶ä»¶ç®±é¡¹ç›®çŠ¶æ€
- åˆ é™¤æ”¶ä»¶ç®±é¡¹ç›®
- æ™ºèƒ½æ–‡æœ¬åˆ†æ

**å·¥å…·**:
- `createInboxItemTool` - åˆ›å»ºæ”¶ä»¶ç®±é¡¹ç›®
- `getInboxItemTool` - è·å–ç‰¹å®šæ”¶ä»¶ç®±é¡¹ç›®
- `listInboxItemsTool` - è·å–æ”¶ä»¶ç®±é¡¹ç›®åˆ—è¡¨
- `updateInboxItemTool` - æ›´æ–°æ”¶ä»¶ç®±é¡¹ç›®
- `deleteInboxItemTool` - åˆ é™¤æ”¶ä»¶ç®±é¡¹ç›®
- `processInboxItemTool` - å¤„ç†æ”¶ä»¶ç®±é¡¹ç›®
- `analyzeTextTool` - æ™ºèƒ½æ–‡æœ¬åˆ†æ

**ç‰¹æ€§**:
- æ™ºèƒ½æ–‡æœ¬åˆ†æå’Œåˆ†ç±»
- å¾…åŠäº‹é¡¹å¿«é€Ÿå¤„ç†
- æ”¯æŒæ‰¹é‡æ“ä½œ
- è‡ªåŠ¨åŒ–å·¥ä½œæµç¨‹

### 8. Search Manager Agent (æœç´¢ç®¡ç†)

**èŒè´£**: ä¸“ä¸šçš„æœç´¢ç®¡ç†åŠ©æ‰‹

**æ“ä½œ**:
- å…¨æ–‡æœç´¢æ‰€æœ‰èµ„æº
- è·¨é¡¹ç›®æœç´¢ä»»åŠ¡å’Œç¬”è®°
- æ™ºèƒ½æœç´¢å»ºè®®
- æœç´¢ç»“æœæ’åºå’Œè¿‡æ»¤

**å·¥å…·**:
- `searchTool` - å…¨æ–‡æœç´¢å·¥å…·

**ç‰¹æ€§**:
- æ”¯æŒå¤šèµ„æºç±»å‹æœç´¢
- æ™ºèƒ½æœç´¢ç®—æ³•
- ç»“æœç›¸å…³æ€§æ’åº
- é«˜çº§è¿‡æ»¤é€‰é¡¹

### 9. Vector Searcher Agent (å‘é‡æœç´¢)

**èŒè´£**: ä¸“ä¸šçš„å‘é‡æœç´¢åŠ©æ‰‹

**æ“ä½œ**:
- åŸºäºè¯­ä¹‰çš„æ™ºèƒ½æœç´¢
- æ–‡æ¡£ç›¸ä¼¼æ€§æŸ¥æ‰¾
- å‘é‡æ•°æ®æ£€ç´¢

**å·¥å…·**:
- `searchVectorDataTool` - å‘é‡æ•°æ®æœç´¢

**ç‰¹æ€§**:
- GLM åµŒå…¥æ¨¡å‹æ”¯æŒ
- è¯­ä¹‰ç›¸ä¼¼æ€§æœç´¢
- é«˜æ•ˆå‘é‡æ£€ç´¢

### 10. Vector Writer Agent (å‘é‡å†™å…¥)

**èŒè´£**: ä¸“ä¸šçš„å‘é‡å­˜å‚¨ç®¡ç†åŠ©æ‰‹

**æ“ä½œ**:
- åˆ›å»ºå‘é‡ç´¢å¼•
- æ·»åŠ æ–‡æ¡£åˆ°å‘é‡å­˜å‚¨
- åˆ é™¤å‘é‡æ•°æ®
- ç®¡ç†å‘é‡å­˜å‚¨é…ç½®

**å·¥å…·**:
- `createVectorIndexTool` - åˆ›å»ºå‘é‡ç´¢å¼•
- `addVectorDataTool` - æ·»åŠ å‘é‡æ•°æ®
- `deleteVectorDataTool` - åˆ é™¤å‘é‡æ•°æ®

**ç‰¹æ€§**:
- è‡ªåŠ¨æ–‡æ¡£åµŒå…¥
- å‘é‡ç´¢å¼•ç®¡ç†
- æ‰¹é‡æ•°æ®å¤„ç†
- å­˜å‚¨ä¼˜åŒ–

## ğŸ”„ å·¥ä½œæµ (Workflows)

å·¥ä½œæµæ˜¯ Mastra æ¡†æ¶ä¸­ç”¨äºå®šä¹‰å’Œæ‰§è¡Œå¤æ‚å¤šæ­¥éª¤è‡ªåŠ¨åŒ–æµç¨‹çš„æœºåˆ¶ã€‚å·¥ä½œæµç”±å¤šä¸ªæ­¥éª¤ï¼ˆStepsï¼‰ç»„æˆï¼Œæ”¯æŒé¡ºåºæ‰§è¡Œã€æ¡ä»¶åˆ†æ”¯ã€å¹¶è¡Œå¤„ç†ç­‰é«˜çº§æµç¨‹æ§åˆ¶ã€‚

### å·¥ä½œæµç‰¹æ€§

- **æ­¥éª¤åŒ–æ‰§è¡Œ**: å°†å¤æ‚æµç¨‹åˆ†è§£ä¸ºå¤šä¸ªå¯ç®¡ç†çš„æ­¥éª¤
- **æ¡ä»¶åˆ†æ”¯**: æ ¹æ®æ•°æ®çŠ¶æ€æ™ºèƒ½é€‰æ‹©æ‰§è¡Œè·¯å¾„
- **æ•°æ®ä¼ é€’**: æ­¥éª¤é—´è‡ªåŠ¨ä¼ é€’å’Œæ˜ å°„æ•°æ®
- **é”™è¯¯å¤„ç†**: å®Œå–„çš„é”™è¯¯å¤„ç†å’Œå›æ»šæœºåˆ¶
- **çŠ¶æ€è¿½è¸ª**: å®æ—¶è¿½è¸ªå·¥ä½œæµæ‰§è¡ŒçŠ¶æ€

### 1. Process Inbox Item Workflow (æ”¶ä»¶ç®±é¡¹ç›®å¤„ç†å·¥ä½œæµ)

**èŒè´£**: è‡ªåŠ¨åŒ–å¤„ç†æ”¶ä»¶ç®±é¡¹ç›®ï¼Œæ™ºèƒ½åˆ†ææ–‡æœ¬å†…å®¹å¹¶åˆ›å»ºç›¸åº”çš„ä»»åŠ¡æˆ–ç¬”è®°

**å·¥ä½œæµ ID**: `process-inbox-item`

**è¾“å…¥å‚æ•°**:
```typescript
{
  uid: string;  // æ”¶ä»¶ç®±é¡¹ç›®UIDï¼Œå¿…å¡«
}
```

**è¾“å‡ºç»“æœ**:
```typescript
{
  success: boolean;
  message: string;
  inboxItem?: {
    uid: string;
    content: string;
    status: string;
  };
  createdItem?: {
    type: "task" | "note";
    data: any;
  };
}
```

**å·¥ä½œæµæ­¥éª¤**:

1. **è·å–æ”¶ä»¶ç®±é¡¹ç›®å¹¶å¢å¼ºå†…å®¹** (`get-inbox-item`)
   - è·å–æ”¶ä»¶ç®±é¡¹ç›®è¯¦æƒ…
   - ä½¿ç”¨ AI (GLM-4 æ¨¡å‹) æ™ºèƒ½å¢å¼ºæ–‡æœ¬å†…å®¹
   - æ¸…ç†å’Œæ ¼å¼åŒ–æ–‡æœ¬
   - è¡¥å……ä¸Šä¸‹æ–‡ä¿¡æ¯
   - æ”¹å–„å¯è¯»æ€§
   - æå–å…³é”®ä¿¡æ¯

2. **åˆ†ææ–‡æœ¬å†…å®¹** (`analyze-text`)
   - è°ƒç”¨ `analyzeInboxTextTool` åˆ†ææ–‡æœ¬
   - æå–ç»“æ„åŒ–ä¿¡æ¯ï¼š
     - `task_name`: ä»»åŠ¡åç§°ï¼ˆå¦‚æœè¯†åˆ«ä¸ºä»»åŠ¡ï¼‰
     - `due_date`: æˆªæ­¢æ—¥æœŸ
     - `priority`: ä¼˜å…ˆçº§ï¼ˆæ•°å­—ï¼‰
     - `tags`: æ ‡ç­¾åˆ—è¡¨
     - `project`: å…³è”é¡¹ç›®

3. **æ¡ä»¶åˆ†æ”¯å¤„ç†** (`branch`)
   - **åˆ†æ”¯ 1**: å¦‚æœæå–åˆ° `task_name` â†’ åˆ›å»ºä»»åŠ¡ (`create-task`)
     - ä½¿ç”¨æå–çš„ä¿¡æ¯åˆ›å»ºä»»åŠ¡
     - è®¾ç½®ä»»åŠ¡å¤‡æ³¨ã€ä¼˜å…ˆçº§ã€æˆªæ­¢æ—¥æœŸç­‰
     - è°ƒç”¨ `createTaskTool` æ‰§è¡Œåˆ›å»º
   - **åˆ†æ”¯ 2**: å¦åˆ™ â†’ åˆ›å»ºç¬”è®° (`create-note`)
     - ä½¿ç”¨æ–‡æœ¬å†…å®¹åˆ›å»ºç¬”è®°
     - åº”ç”¨æå–çš„æ ‡ç­¾
     - è°ƒç”¨ `createNoteTool` æ‰§è¡Œåˆ›å»º

4. **æ ‡è®°ä¸ºå·²å¤„ç†** (`process-inbox-item`)
   - è°ƒç”¨ `processInboxItemTool` æ ‡è®°æ”¶ä»¶ç®±é¡¹ç›®ä¸ºå·²å¤„ç†çŠ¶æ€

5. **æ±‡æ€»ç»“æœ** (`finalize`)
   - æ±‡æ€»æ‰€æœ‰æ­¥éª¤çš„æ‰§è¡Œç»“æœ
   - è¿”å›å®Œæ•´çš„å¤„ç†æŠ¥å‘Š

**AI å¢å¼ºåŠŸèƒ½**:

å·¥ä½œæµåœ¨ç¬¬ä¸€æ­¥ä½¿ç”¨ GLM-4 æ¨¡å‹å¯¹æ”¶ä»¶ç®±æ–‡æœ¬è¿›è¡Œæ™ºèƒ½å¢å¼ºï¼š

- **æ¸…ç†å’Œæ ¼å¼åŒ–**: å»é™¤å¤šä½™ç©ºæ ¼ã€æ¢è¡Œï¼Œç»Ÿä¸€æ ¼å¼
- **è¡¥å……ä¸Šä¸‹æ–‡**: å¦‚æœæ–‡æœ¬ä¸å®Œæ•´ï¼Œå°è¯•è¡¥å……åˆç†çš„ä¸Šä¸‹æ–‡
- **æ”¹å–„å¯è¯»æ€§**: ä¼˜åŒ–æ–‡æœ¬ç»“æ„ï¼Œä½¿å…¶æ›´æ¸…æ™°æ˜“è¯»
- **æå–å…³é”®ä¿¡æ¯**: è¯†åˆ«å¹¶çªå‡ºé‡è¦ä¿¡æ¯
- **ä¿æŒåŸæ„**: ç¡®ä¿å¢å¼ºåçš„æ–‡æœ¬ä¿æŒåŸå§‹æ„å›¾å’Œæ ¸å¿ƒä¿¡æ¯

**ä½¿ç”¨åœºæ™¯**:

```typescript
// é€šè¿‡ Super Agent è°ƒç”¨å·¥ä½œæµ
"å¤„ç†æ”¶ä»¶ç®±é¡¹ç›®ï¼ŒUID ä¸º inbox_12345"

// å·¥ä½œæµä¼šè‡ªåŠ¨ï¼š
// 1. è·å–å¹¶å¢å¼ºæ–‡æœ¬å†…å®¹
// 2. åˆ†ææ–‡æœ¬ï¼Œåˆ¤æ–­æ˜¯ä»»åŠ¡è¿˜æ˜¯ç¬”è®°
// 3. åˆ›å»ºç›¸åº”çš„ä»»åŠ¡æˆ–ç¬”è®°
// 4. æ ‡è®°æ”¶ä»¶ç®±é¡¹ç›®ä¸ºå·²å¤„ç†
```

**ç‰¹æ€§**:
- âœ… å…¨è‡ªåŠ¨åŒ–å¤„ç†æµç¨‹
- âœ… AI æ™ºèƒ½æ–‡æœ¬å¢å¼º
- âœ… æ™ºèƒ½åˆ†ç±»ï¼ˆä»»åŠ¡ vs ç¬”è®°ï¼‰
- âœ… è‡ªåŠ¨æå–ç»“æ„åŒ–ä¿¡æ¯
- âœ… é”™è¯¯å®¹é”™æœºåˆ¶ï¼ˆAI å¢å¼ºå¤±è´¥æ—¶ä½¿ç”¨åŸå§‹å†…å®¹ï¼‰
- âœ… å®Œæ•´çš„çŠ¶æ€è¿½è¸ª

**ç¯å¢ƒè¦æ±‚**:
- éœ€è¦é…ç½® `ZHIPU_API_KEY` ç¯å¢ƒå˜é‡ä»¥å¯ç”¨ AI æ–‡æœ¬å¢å¼ºåŠŸèƒ½
- å¦‚æœæœªé…ç½®æˆ–å¢å¼ºå¤±è´¥ï¼Œå·¥ä½œæµä¼šä½¿ç”¨åŸå§‹æ–‡æœ¬ç»§ç»­æ‰§è¡Œ

## ğŸ”§ æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: Mastra (AI Agent æ¡†æ¶)
- **AI æ¨¡å‹**: zhipuai-coding-plan/glm-4.6
- **åµŒå…¥æ¨¡å‹**: GLM åµŒå…¥æ¨¡å‹ (å‘é‡æœç´¢)
- **å­˜å‚¨**: PostgreSQL (é€šè¿‡ `@mastra/pg`)
- **å‘é‡å­˜å‚¨**: è‡ªå®šä¹‰å‘é‡å­˜å‚¨å®ç°
- **æ—¥å¿—**: Pino Logger
- **HTTP å®¢æˆ·ç«¯**: Axios
- **æ•°æ®éªŒè¯**: Zod
- **å¼€å‘è¯­è¨€**: TypeScript

## ğŸŒ API å®¢æˆ·ç«¯

é¡¹ç›®åŒ…å«ä¸€ä¸ªå®Œæ•´çš„ Tududi API å®¢æˆ·ç«¯ (`src/mastra/lib/api-client.ts`)ï¼Œæä¾›ï¼š

### æ ¸å¿ƒåŠŸèƒ½

- **é€šç”¨è¯·æ±‚**: `apiRequest()` - æ”¯æŒè‡ªå®šä¹‰è¯·æ±‚é…ç½®
- **é‡è¯•æœºåˆ¶**: `apiRequestWithRetry()` - è‡ªåŠ¨å¤„ç†æ•°æ®åº“é”å®šé”™è¯¯
- **ç®€åŒ–æ–¹æ³•**: `apiGet()`, `apiPost()`, `apiPatch()`, `apiDelete()`

### ç‰¹æ€§

- âœ… è‡ªåŠ¨å¿½ç•¥è‡ªç­¾åè¯ä¹¦é”™è¯¯
- âœ… è‡ªåŠ¨å¤„ç† Cookie è®¤è¯
- âœ… æŒ‡æ•°é€€é¿é‡è¯•æœºåˆ¶ (3 æ¬¡å°è¯•)
- âœ… æ”¯æŒæŸ¥è¯¢å‚æ•°å’Œè¯·æ±‚ä½“
- âœ… è¯¦ç»†çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•

### ä½¿ç”¨ç¤ºä¾‹

```typescript
import { apiGet, apiPost } from './lib/api-client';

// è·å–æ•°æ®
const result = await apiGet('/api/areas', { limit: '20' }, cookie);

// åˆ›å»ºæ•°æ®
const newProject = await apiPost('/api/project', {
  name: 'æ–°é¡¹ç›®',
  state: 'planned',
  tags: [{ name: 'é‡è¦' }]
}, cookie);
```

## ğŸ“Š æ•°æ®æ¨¡å‹

### åŒºåŸŸ (Areas)
```typescript
{
  id: number;           // æ•°æ®åº“ ID
  uid: string;          // å”¯ä¸€æ ‡è¯†ç¬¦ (ä»¥ "area_" å¼€å¤´)
  name: string;         // åŒºåŸŸåç§°
  description?: string; // åŒºåŸŸæè¿°
}
```

### é¡¹ç›® (Projects)
```typescript
{
  id: number;                    // æ•°æ®åº“ ID
  uid: string;                   // å”¯ä¸€æ ‡è¯†ç¬¦ (ä»¥ "proj_" å¼€å¤´)
  name: string;                  // é¡¹ç›®åç§°
  description?: string;          // é¡¹ç›®æè¿°
  state: 'planned' | 'in_progress' | 'blocked' | 'idea' | 'completed'; // é¡¹ç›®çŠ¶æ€
  area_id?: number;              // å…³è”åŒºåŸŸ ID
  pin_to_sidebar?: boolean;      // æ˜¯å¦å›ºå®šåˆ°ä¾§è¾¹æ 
  due_date_at?: string;          // åˆ°æœŸæ—¥æœŸ (ISO æ ¼å¼)
  image_url?: string;            // é¡¹ç›®å›¾ç‰‡ URL
  task_status?: object;          // ä»»åŠ¡ç»Ÿè®¡ä¿¡æ¯
  completion_percentage?: number; // å®Œæˆç™¾åˆ†æ¯”
  tags: Array<{ id: number; uid: string; name: string; }>; // å…³è”æ ‡ç­¾
}
```

### æ ‡ç­¾ (Tags)
```typescript
{
  id: number;           // æ•°æ®åº“ ID
  uid: string;          // å”¯ä¸€æ ‡è¯†ç¬¦
  name: string;         // æ ‡ç­¾åç§° (è·¨é¡¹ç›®é€šç”¨)
}
```

### ç¬”è®° (Notes)
```typescript
{
  uid: string;          // å”¯ä¸€æ ‡è¯†ç¬¦
  title: string;        // ç¬”è®°æ ‡é¢˜
  content?: string;     // ç¬”è®°å†…å®¹ (æ”¯æŒ Markdown)
  project_id?: number;  // å…³è”é¡¹ç›® ID
  user_id?: number;     // ç”¨æˆ· ID
  created_at?: string;  // åˆ›å»ºæ—¶é—´
  updated_at?: string;  // æ›´æ–°æ—¶é—´
  tags: Array<{ name: string; uid: string; }>; // å…³è”æ ‡ç­¾
  Project?: { name: string; uid: string; } | null; // å…³è”é¡¹ç›®ä¿¡æ¯
}
```

### ä»»åŠ¡ (Tasks)
```typescript
{
  id: number;                    // æ•°æ®åº“ ID
  uid: string;                   // å”¯ä¸€æ ‡è¯†ç¬¦ (ä»¥ "task_" å¼€å¤´)
  name: string;                  // ä»»åŠ¡åç§°
  note?: string;                 // ä»»åŠ¡å¤‡æ³¨
  state: 'active' | 'completed' | 'archived'; // ä»»åŠ¡çŠ¶æ€
  priority?: 'high' | 'medium' | 'low'; // ä¼˜å…ˆçº§
  due_date?: string;             // åˆ°æœŸæ—¥æœŸ (ISO æ ¼å¼)
  project_id?: number;           // å…³è”é¡¹ç›® ID
  parent_task_id?: number;       // çˆ¶ä»»åŠ¡ ID (å­ä»»åŠ¡)
  recurrence_type?: 'daily' | 'weekly' | 'monthly'; // é‡å¤ç±»å‹
  recurrence_interval?: number;  // é‡å¤é—´éš”
  recurrence_days?: string[];    // é‡å¤çš„æ˜ŸæœŸå‡ ï¼ˆä»…ç”¨äº weeklyï¼‰
  recurrence_end_date?: string;  // é‡å¤ç»“æŸæ—¥æœŸ
  created_at?: string;           // åˆ›å»ºæ—¶é—´
  updated_at?: string;           // æ›´æ–°æ—¶é—´
  tags: Array<{ id: number; uid: string; name: string; }>; // å…³è”æ ‡ç­¾
  subtasks?: Array<Task>;        // å­ä»»åŠ¡åˆ—è¡¨
}
```

### æ”¶ä»¶ç®±é¡¹ç›® (Inbox Items)
```typescript
{
  id: number;           // æ•°æ®åº“ ID
  uid: string;          // å”¯ä¸€æ ‡è¯†ç¬¦
  title: string;        // é¡¹ç›®æ ‡é¢˜
  content?: string;     // é¡¹ç›®å†…å®¹
  processed: boolean;   // æ˜¯å¦å·²å¤„ç†
  item_type?: string;   // é¡¹ç›®ç±»å‹
  source?: string;      // æ¥æº
  priority?: number;    // ä¼˜å…ˆçº§
  created_at?: string;  // åˆ›å»ºæ—¶é—´
  updated_at?: string;  // æ›´æ–°æ—¶é—´
  metadata?: object;    // å…ƒæ•°æ®
}
```

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### åœºæ™¯ 1: è·å–ç³»ç»Ÿæ•´ä½“çŠ¶æ€
```typescript
// è°ƒç”¨ Super Agent
"è¯·æä¾›å½“å‰ç³»ç»Ÿçš„æ•´ä½“æ•°æ®æ¦‚è§ˆ"
```
è¾“å‡º: åŒ…å«æ‰€æœ‰åŒºåŸŸã€é¡¹ç›®ã€æ ‡ç­¾ã€ç¬”è®°çš„ç»Ÿè®¡æ•°æ®å’Œåˆ†æ

### åœºæ™¯ 2: åˆ›å»ºæ–°é¡¹ç›®
```typescript
// è°ƒç”¨ Projects Manager Agent
"åˆ›å»ºä¸€ä¸ªåä¸º 'AI Agent é¡¹ç›®' çš„é¡¹ç›®ï¼ŒçŠ¶æ€ä¸ºè¿›è¡Œä¸­ï¼Œæ ‡ç­¾åŒ…å« 'AI' å’Œ 'Mastra'"
```
è¾“å‡º: æ–°é¡¹ç›®åˆ›å»ºæˆåŠŸï¼ŒåŒ…å«æ‰€æœ‰å…³è”ä¿¡æ¯

### åœºæ™¯ 3: æœç´¢ç¬”è®°
```typescript
// è°ƒç”¨ Notes Manager Agent
"æœç´¢åŒ…å« 'Mastra' å…³é”®è¯çš„ç¬”è®°"
```
è¾“å‡º: æ‰€æœ‰åŒ¹é…çš„ç¬”è®°åˆ—è¡¨

### åœºæ™¯ 4: ç®¡ç†æ ‡ç­¾
```typescript
// è°ƒç”¨ Tags Manager Agent
"å°†æ ‡ç­¾ 'é‡è¦' é‡å‘½åä¸º 'é«˜ä¼˜å…ˆçº§'"
```
è¾“å‡º: æ ‡ç­¾æ›´æ–°æˆåŠŸï¼Œè‡ªåŠ¨æ›´æ–°æ‰€æœ‰å…³è”çš„ä»»åŠ¡å’Œç¬”è®°

### åœºæ™¯ 5: åˆ›å»ºå’Œç®¡ç†ä»»åŠ¡
```typescript
// è°ƒç”¨ Tasks Manager Agent
"åˆ›å»ºä¸€ä¸ªåä¸º 'å®Œæˆé¡¹ç›®æ–‡æ¡£' çš„ä»»åŠ¡ï¼Œè®¾ç½®ä¸ºä»Šæ—¥ä»»åŠ¡ï¼Œä¼˜å…ˆçº§ä¸ºé«˜"
```
è¾“å‡º: æ–°ä»»åŠ¡åˆ›å»ºæˆåŠŸï¼Œè‡ªåŠ¨æ·»åŠ åˆ°ä»Šæ—¥ä»»åŠ¡åˆ—è¡¨

### åœºæ™¯ 6: å¤„ç†æ”¶ä»¶ç®±é¡¹ç›®
```typescript
// æ–¹å¼ 1: é€šè¿‡ Inbox Manager Agent æ‰‹åŠ¨å¤„ç†
"åˆ†ææ”¶ä»¶ç®±ä¸­çš„æ–‡æœ¬å†…å®¹ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºç›¸åº”çš„ä»»åŠ¡æˆ–ç¬”è®°"

// æ–¹å¼ 2: é€šè¿‡å·¥ä½œæµè‡ªåŠ¨åŒ–å¤„ç†ï¼ˆæ¨èï¼‰
"ä½¿ç”¨ processInboxItemWorkflow å¤„ç†æ”¶ä»¶ç®±é¡¹ç›®ï¼ŒUID ä¸º inbox_12345"
```
è¾“å‡º: 
- æ–¹å¼ 1: æ™ºèƒ½åˆ†ææ–‡æœ¬å†…å®¹ï¼Œæ‰‹åŠ¨åˆ›å»ºç›¸åº”çš„èµ„æº
- æ–¹å¼ 2: å…¨è‡ªåŠ¨å¤„ç†æµç¨‹ï¼š
  - AI å¢å¼ºæ–‡æœ¬å†…å®¹
  - è‡ªåŠ¨åˆ†æå¹¶æå–ç»“æ„åŒ–ä¿¡æ¯
  - æ™ºèƒ½åˆ¤æ–­åˆ›å»ºä»»åŠ¡æˆ–ç¬”è®°
  - è‡ªåŠ¨æ ‡è®°æ”¶ä»¶ç®±é¡¹ç›®ä¸ºå·²å¤„ç†
  - è¿”å›å®Œæ•´çš„å¤„ç†æŠ¥å‘Š

### åœºæ™¯ 7: æ™ºèƒ½æœç´¢
```typescript
// è°ƒç”¨ Search Manager Agent
"æœç´¢æ‰€æœ‰åŒ…å« 'AI' å…³é”®è¯çš„é¡¹ç›®ã€ä»»åŠ¡å’Œç¬”è®°"
```
è¾“å‡º: è·¨èµ„æºç±»å‹çš„æœç´¢ç»“æœï¼ŒæŒ‰ç›¸å…³æ€§æ’åº

### åœºæ™¯ 8: å‘é‡è¯­ä¹‰æœç´¢
```typescript
// è°ƒç”¨ Vector Searcher Agent
"æŸ¥æ‰¾ä¸ 'æœºå™¨å­¦ä¹ é¡¹ç›®ç®¡ç†' è¯­ä¹‰ç›¸ä¼¼çš„æ–‡æ¡£"
```
è¾“å‡º: åŸºäºè¯­ä¹‰ç›¸ä¼¼æ€§çš„æ™ºèƒ½æœç´¢ç»“æœ

## ğŸ” è®¤è¯ä¸æƒé™

### ä¼šè¯è®¤è¯
- ä½¿ç”¨ `TUDUDI_COOKIE` ç¯å¢ƒå˜é‡å­˜å‚¨ä¼šè¯ Cookie
- API å®¢æˆ·ç«¯è‡ªåŠ¨åœ¨è¯·æ±‚ä¸­åŒ…å« Cookie
- æ‰€æœ‰å·¥å…·æ‰§è¡Œæ—¶ä» `runtimeContext` è·å– Cookie

### æƒé™ç®¡ç†
- åŸºäº Tududi API çš„ç°æœ‰æƒé™ç³»ç»Ÿ
- Agent æ“ä½œéµå¾ªç”¨æˆ·çš„æƒé™çº§åˆ«
- å…±äº«èµ„æºåŸºäºå…±äº«è®¾ç½®è¿›è¡Œè®¿é—®æ§åˆ¶

## ğŸ“ˆ ç›‘æ§ä¸æ—¥å¿—

### æ—¥å¿—é…ç½®
- ä½¿ç”¨ **Pino Logger** è¿›è¡Œç»“æ„åŒ–æ—¥å¿—è®°å½•
- æ—¥å¿—çº§åˆ«: `info` (å¯é…ç½®)
- æ—¥å¿—åç§°: 'Mastra'

### è§‚æµ‹æ€§
- **é»˜è®¤å¯¼å‡ºå™¨**: å¯ç”¨ AI è¿½è¸ª
- **äº‘å¯¼å‡ºå™¨**: æ”¯æŒäº‘ç«¯è§‚æµ‹ (å¯é€‰)
- å»ºè®®å¯ç”¨è§‚æµ‹æ€§ä»¥è·å¾—æ›´å¥½çš„æ€§èƒ½åˆ†æ

### å†…å­˜ç®¡ç†
- å¯é€‰å¯ç”¨ **Memory** åŠŸèƒ½ä¿æŒå¯¹è¯ä¸Šä¸‹æ–‡
- ä½¿ç”¨ PostgreSQL å­˜å‚¨ä¼šè¯å†å²
- å½“å‰ç‰ˆæœ¬é»˜è®¤ç¦ç”¨ Memory ä»¥æé«˜æ€§èƒ½

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æ•°æ®åº“è¿æ¥å¤±è´¥**
   - æ£€æŸ¥ `DATABASE_URL` ç¯å¢ƒå˜é‡
   - ç¡®ä¿ PostgreSQL æœåŠ¡æ­£åœ¨è¿è¡Œ
   - éªŒè¯è¿æ¥å­—ç¬¦ä¸²æ ¼å¼

2. **API è®¤è¯å¤±è´¥**
   - ç¡®è®¤ `TUDUDI_COOKIE` å·²æ­£ç¡®è®¾ç½®
   - éªŒè¯ Cookie æ˜¯å¦æœ‰æ•ˆ
   - æ£€æŸ¥ API åŸºç¡€ URL æ˜¯å¦å¯è®¿é—®

3. **Agent å“åº”ç¼“æ…¢**
   - æ£€æŸ¥ç½‘ç»œè¿æ¥
   - ç¡®è®¤ AI æ¨¡å‹æœåŠ¡çŠ¶æ€
   - è°ƒæ•´æŸ¥è¯¢å‚æ•°ä»¥å‡å°‘æ•°æ®é‡

4. **å·¥å…·è°ƒç”¨å¤±è´¥**
   - éªŒè¯è¾“å…¥å‚æ•°æ˜¯å¦ç¬¦åˆ Zod æ¨¡å¼
   - æ£€æŸ¥ API ç«¯ç‚¹æ˜¯å¦å¯è®¿é—®
   - æŸ¥çœ‹é”™è¯¯æ—¥å¿—è·å–è¯¦ç»†ä¿¡æ¯

## ğŸ“ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°å·¥å…·

1. åœ¨å¯¹åº”ç›®å½•åˆ›å»ºå·¥å…·æ–‡ä»¶:
```typescript
// src/mastra/tools/area/my-new-tool.ts
import { createTool } from "@mastra/core/tools";
import { z } from "zod";
import { apiPost } from "../../lib/api-client";

export const myNewTool = createTool({
  id: "my-new-tool",
  description: "å·¥å…·æè¿°",
  inputSchema: z.object({
    // è¾“å…¥å‚æ•°
  }),
  outputSchema: z.object({
    // è¾“å‡ºæ ¼å¼
  }),
  execute: async ({ context, runtimeContext }) => {
    // å®ç°é€»è¾‘
  },
});
```

2. åœ¨å¯¹åº” Agent ä¸­å¯¼å…¥å¹¶æ³¨å†Œ:
```typescript
// src/mastra/agents/areas-manager-agent.ts
import { myNewTool } from "../tools/area/my-new-tool";

export const areasManagerAgent = new Agent({
  tools: { myNewTool },
  // ... å…¶ä»–é…ç½®
});
```

### æ‰©å±• Agent åŠŸèƒ½

1. æ›´æ–° Agent æŒ‡ä»¤ (instructions)
2. æ·»åŠ æ–°å·¥å…·
3. åœ¨ Super Agent ä¸­æ³¨å†Œå­ Agent

## ğŸ“š ç›¸å…³èµ„æº

- **Mastra æ¡†æ¶**: https://mastra.ai/
- **Tududi é¡¹ç›®**: https://github.com/chrisvel/tududi
- **PostgreSQL**: https://www.postgresql.org/
- **Pino Logger**: https://github.com/pinojs/pino
- **Zod éªŒè¯**: https://zod.dev/

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](../../LICENSE) æ–‡ä»¶

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

---

**æ³¨æ„**: è¿™æ˜¯ä¸€ä¸ª AI Agent ç³»ç»Ÿæ–‡æ¡£ã€‚å¦‚éœ€äº†è§£åº•å±‚ Tududi REST APIï¼Œè¯·å‚è€ƒ [doc/api/](../doc/api/) ç›®å½•ã€‚
